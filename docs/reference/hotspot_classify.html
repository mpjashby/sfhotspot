<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Classify cells in a grid based on changes in the clustering of points
(typically representing events) in a two-dimensional regular grid over time."><title>Classify hot-spots — hotspot_classify • sfhotspot</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Classify hot-spots — hotspot_classify"><meta property="og:description" content="Classify cells in a grid based on changes in the clustering of points
(typically representing events) in a two-dimensional regular grid over time."><meta property="og:image" content="http://pkgs.lesscrime.info/sfhotspot/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">sfhotspot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mpjashby/sfhotspot/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Classify hot-spots</h1>
      <small class="dont-index">Source: <a href="https://github.com/mpjashby/sfhotspot/blob/HEAD/R/hotspot_classify.R" class="external-link"><code>R/hotspot_classify.R</code></a></small>
      <div class="d-none name"><code>hotspot_classify.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Classify cells in a grid based on changes in the clustering of points
(typically representing events) in a two-dimensional regular grid over time.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">hotspot_classify</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  start <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cell_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  grid_type <span class="op">=</span> <span class="st">"rect"</span>,</span>
<span>  grid <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  collapse <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="hotspot_classify_params.html">hotspot_classify_params</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p><code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf</a></code> data frame containing points.</p></dd>


<dt>time</dt>
<dd><p>Name of the column in <code>data</code> containing <code>Date</code> or
<code>POSIXt</code> values representing the date associated with each point. If
this argument is <code>NULL</code> and <code>data</code> contains a single column of
<code>Date</code> or <code>POSIXt</code> values, that column will be used
automatically.</p></dd>


<dt>period</dt>
<dd><p>A character value containing a number followed by a unit of
time, e.g. for example, "12 months" or "3.5 days", where the unit of time
is one of second, minute, hour, day, week, month, quarter or year (or their
plural forms).</p></dd>


<dt>start</dt>
<dd><p>A <code>Date</code> or <code>POSIXt</code> value specifying when the first
temporal period should start. If <code>NULL</code> (the default), the first
period will start at the beginning of the earliest date found in the data
(if <code>period</code> is specified in days, weeks, months, quarters or years)
or at the earliest time found in the data otherwise.</p></dd>


<dt>cell_size</dt>
<dd><p><code>numeric</code> value specifying the size of each equally
spaced grid cell, using the same units (metres, degrees, etc.) as used in
the <code>sf</code> data frame given in the <code>data</code> argument. Ignored if
<code>grid</code> is not <code>NULL</code>. If this argument and <code>grid</code> are
<code>NULL</code> (the default), the cell size will be calculated automatically
(see Details).</p></dd>


<dt>grid_type</dt>
<dd><p><code>character</code> specifying whether the grid should be made
up of squares (<code>"rect"</code>, the default) or hexagons (<code>"hex"</code>).
Ignored if <code>grid</code> is not <code>NULL</code>.</p></dd>


<dt>grid</dt>
<dd><p><code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf</a></code> data frame containing points containing
polygons, which will be used as the grid for which counts are made.</p></dd>


<dt>collapse</dt>
<dd><p>If the range of dates in the data is not a multiple of
<code>period</code>, the final period will be shorter than the others. In that
case, should this shorter period be collapsed into the penultimate period?</p></dd>


<dt>params</dt>
<dd><p>A list of optional parameters that can affect the output. The
list can be produced most easily using the
<code><a href="hotspot_classify_params.html">hotspot_classify_params</a></code> helper function.</p></dd>


<dt>quiet</dt>
<dd><p>if set to <code>TRUE</code>, messages reporting the values of any
parameters set automatically will be suppressed. The default is
<code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An <code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf</a></code> tibble of regular grid cells with
corresponding hot-spot classifications for each cell. This can be plotted
using <code><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></code>.</p>


<p>Hot-spots are spatial areas that contain more points than would be expected
by chance; cold-spots are areas that contain fewer points than would be
expected. Whether an area is a hot-spot can vary over time. This function
creates a space-time cube, determines whether an area is a hot-spot for each
of several consecutive time periods and uses that to classify areas according
to whether they are persistent, intermittent, emerging or former hot- or
cold-spots.</p><div class="section">
<h3 id="hot-and-cold-spots">Hot and cold spots<a class="anchor" aria-label="anchor" href="#hot-and-cold-spots"></a></h3>


<p>Hot- and cold-spots are identified by calculating the Getis-Ord
<i>G</i><sub><i>i</i></sub><sup>*</sup>
(gi-star) or
<i>G</i><sub><i>i</i></sub><sup>*</sup>
\(Z\)-score statistic for each cell in a regular grid for each time period.
Cells are classified as follows, using the parameters provided in the
<code>params</code> argument:</p><ul><li><p><em>Persistent hot-/cold-spots</em> are cells that have been hot-/cold-spots
consistently over time. Formally: if the <em>p</em>-value is less than
<code>critical_p</code> for at least <code>persistent_prop</code> proportion of time periods.</p></li>
<li><p><em>Emerging hot-/cold-spots</em> are cells that have become hot-/cold-spots
recently but were not previously. Formally: if the <em>p</em>-value is less
than <code>critical_p</code> for at least <code>hotspot_prop</code> of time periods defined as
recent by <code>recent_prop</code> but the <em>p</em>-value was <em>not</em> less than
<code>critical_p</code> for at least <code>hotspot_prop</code> of time periods defined as
non-recent by <code>1 - recent_prop</code>.</p></li>
<li><p><em>Former hot-/cold-spots</em> are cells that used to be hot-/cold-spots but have
not been more recently. Formally: if the <em>p</em>-value was less than
<code>critical_p</code> for at least <code>hotspot_prop</code> of time periods defined as
non-recent by <code>1 - recent_prop</code> but the <em>p</em>-value was <em>not</em> less than
<code>critical_p</code> for for at least <code>hotspot_prop</code> of time periods defined as
recent by <code>recent_prop</code>.</p></li>
<li><p><em>Intermittent hot-/cold-spots</em> are cells that have been hot-/cold-spots,
but not as frequently as persistent hotspots and not only during
recent/non-recent periods. Formally: if the <em>p</em>-value is less than
<code>critical_p</code> for at least <code>hotspot_prop</code> of time periods but the cell is
not an emerging or former hotspot.</p></li>
<li><p><em>No pattern</em> if none of the above categories apply.</p></li>
</ul></div>



<div class="section">
<h3 id="coverage-of-the-output-data">Coverage of the output data<a class="anchor" aria-label="anchor" href="#coverage-of-the-output-data"></a></h3>


<p>The grid produced by this function covers the convex hull of the input data
layer. This means the result may include
<i>G</i><sub><i>i</i></sub><sup>*</sup> or
<i>G</i><sub><i>i</i></sub><sup>*</sup>
values for cells that are outside the area for which data were provided,
which could be misleading. To handle this, consider cropping the output layer
to the area for which data are available. For example, if you only have crime
data for a particular district, crop the output dataset to the district
boundary using <code><a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html" class="external-link">st_intersection</a></code>.</p>
</div>



<div class="section">
<h3 id="automatic-cell-size-selection">Automatic cell-size selection<a class="anchor" aria-label="anchor" href="#automatic-cell-size-selection"></a></h3>


<p>If no cell size is given then the cell size will be set so that there are 50
cells on the shorter side of the grid. If the <code>data</code> SF object is projected
in metres or feet, the number of cells will be adjusted upwards so that the
cell size is a multiple of 100.</p>
</div>


    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Chainey, S. (2020). <em>Understanding Crime: Analyzing the Geography of
Crime</em>. Redlands, CA: ESRI.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Matt Ashby.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

